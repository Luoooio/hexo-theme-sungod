# workflow name
name: Hexo Blog CI

# master branch on push, auto run
on: 
  push:
    branches:
      - master
  
jobs:
  build: 
    runs-on: ubuntu-latest 
  
    steps:
    # check it to your workflow can access it
    # from: https://github.com/actions/checkout
    - name: Checkout Repository master branch
      uses: actions/checkout@master 
  
    # from: https://github.com/actions/setup-node  
    - name: Setup Node.js 12.x 
      uses: actions/setup-node@master
      with:
        node-version: "12.x"
  
    - name: Setup Hexo Dependencies
      run: |
        npm install hexo-cli -g
        npm install
        npm install --save hexo-deployer-git
  
    - name: Setup Deploy Private Key
      env:
        HEXO_DEPLOY_PRIVATE_KEY: ${ {  secrets.HEXO_DEPLOY_PRIVATE_KEY }}
      run: |
        mkdir -p ~/.ssh/
        echo -----BEGIN OPENSSH PRIVATE KEY-----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-----END OPENSSH PRIVATE KEY----- > ~/.ssh/id_rsa 
        chmod 600 ~/.ssh/id_rsa
        ssh-keyscan github.com >> ~/.ssh/known_hosts
  
    - name: Setup Git Infomation
      run: |
        git config --global user.name 'Luoooio' 
        git config --global user.email '1031851275@qq.com'
    - name: Deploy Hexo 
      run: |
        hexo clean
        hexo generate 
        hexo deploy
